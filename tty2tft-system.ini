# Version 1.9
#
# Copyright (c) 2021 ojaksch, venice
#
#

# Recurring functions
yesno() {
    seconds=${1}
    [ -z "${seconds}" ] && seconds=5
    echo -en "${chide}"
    while [ ${seconds} -gt 0 ]; do
	echo -en "\e[1D${fred}${seconds}${freset}"
	read -r -s -t1 -N1 KEY
	[ "${KEY}" == "A" ] && KEY="y" && break
	[ "${KEY}" == "B" ] && KEY="n" && break
	: $((seconds--))
    done
    echo -en "${cshow}"
    echo
}

fblink="\e[5m"
fbold="\e[1m"
fdim="\e[2m"
freset="\e[0m\033[0m"
finvers="\e[7m"
fhidden="\e[8m"
funderl="\e[4m"
fblue="\e[1;34m"
fgreen="\e[1;32m"
fcyan="\e[1;36m"
fred="\e[1;31m"
fmagenta="\e[1;35m"
fyellow="\e[1;33m"
fwhite="\e[1;37m"
fgrey="\e[1;30m"
chide="\e[?25l"
cshow="\e[?25h"

REPOSITORY_URL="https://raw.githubusercontent.com/venice1200/MiSTer_tty2tft/main"
#REPOSITORY_URL="https://raw.githubusercontent.com/venice1200/MiSTer_tty2tft/main/Testing"
PICTURE_REPOSITORY_URL="https://www.tty2tft.de"
export RSYNC_PASSWORD="eSvcFFF5aLpmbNqWKE3SE2FewkWE"

tty2tft_PATH="/media/fat/tty2tft"
NODEBUG="-q -o /dev/null"

INITSCRIPT="${tty2tft_PATH}/S60tty2tft"
INITDISABLED="${tty2tft_PATH}/_S60tty2tft"
UPDATESCRIPT="/media/fat/Scripts/update_tty2tft.sh"
DAEMONNAME="tty2tft.sh"
DAEMONSCRIPT="${tty2tft_PATH}/tty2tft.sh"
CCSCRIPT="/media/fat/Scripts/tty2tft_cc.sh"
USERSTARTUP="/media/fat/linux/user-startup.sh"
USERSTARTUPTPL="/media/fat/linux/_user-startup.sh"

WAITSECS="0.02"
ttyresponse=""
newcore=""
oldcore=""
corenamefile="/tmp/CORENAME"
## picturefolder="${tty2tft_PATH}/pics"
## picturefolder_pri="${tty2tft_PATH}/pics_pri"

# Debugging
debug="false"
debugfile="/tmp/tty2tft"

# Do not change this until you know what you do
MOUNTRO="false"			# Helper flag for update_tty2tft_script.sh. Please don't touch as it leaves the SD card of MiSTer writeable otherwise.

# Serial
BAUDRATE="115200"
TTYDEV="/dev/ttyUSB0"
TTYPARAM="cs8 raw -parenb -cstopb -hupcl -echo"

# Userdata
tty2tft_UPDATE="yes"            # Keep the display software up-to-date
CONTRAST="100"                  # Set/send your Contrast from 0..255, default by Arduino Sketch = 200
ROTATE="no"                     # Set to "yes" if you want the Display rotated by 180 degrees
SCRIPT_UPDATE="yes"             # Set to "yes" if you want to update the tty2tft Scripts by the "Updater"
VIDEOPLAY="yes"                 # Set to "yes" to alwas show a video if available. "no" for no video at all, "may" to dice out whether to play video or not
SCREENSAVER="yes"               # Set to "yes" to enable screensaver mode on display
SCREENSAVER_START="2"           # Start screensaver after x minutes (1-59)
SCREENSAVER_IVAL="10"           # Screensaver Interval (1-59) seconds
